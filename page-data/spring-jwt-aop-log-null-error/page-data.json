{"componentChunkName":"component---src-templates-post-jsx","path":"/spring-jwt-aop-log-null-error/","result":{"data":{"site":{"siteMetadata":{"title":"RUN:DEVEL:RUN"}},"markdownRemark":{"id":"7ed8f468-bf31-51b9-a11d-6b290ecaa1ba","excerpt":"☀️ 테스트 환경 OpenJDK 17.0.2 Spring Boot 3.0.5 ✋ 들어가며 JWT를 구현하는 중에 내장 톰캣이 시작되지 못했다는 아주 기분나쁜 에러를 만났다. , \n필자가 겪은 문제는 JWT Filter와 AOP의 조합에서 문제가 생겼는데 오류의 원인과 해결방법을 공유하보려고 한다. ‼️ 문제의 재구성 실제로 겪었던 문제를 다시 살펴보기 위해서…","html":"<h2 id=\"️-테스트-환경\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%99%98%EA%B2%BD\" aria-label=\"️ 테스트 환경 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>☀️ 테스트 환경</h2>\n<blockquote>\n<ul>\n<li>OpenJDK 17.0.2</li>\n<li>Spring Boot 3.0.5</li>\n</ul>\n</blockquote>\n<h2 id=\"-들어가며\" style=\"position:relative;\"><a href=\"#-%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\" 들어가며 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>✋ 들어가며</h2>\n<p>JWT를 구현하는 중에 내장 톰캣이 시작되지 못했다는 아주 기분나쁜 에러를 만났다. <code class=\"language-text\">\"this.logger\" is null</code>, <code class=\"language-text\">Unable to start embedded Tomcat</code>\n필자가 겪은 문제는 JWT Filter와 AOP의 조합에서 문제가 생겼는데 오류의 원인과 해결방법을 공유하보려고 한다.</p>\n<hr>\n<h2 id=\"️-문제의-재구성\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EB%AC%B8%EC%A0%9C%EC%9D%98-%EC%9E%AC%EA%B5%AC%EC%84%B1\" aria-label=\"️ 문제의 재구성 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>‼️ 문제의 재구성</h2>\n<p>실제로 겪었던 문제를 다시 살펴보기 위해서 아래와 같은 문제의 소스를 다시 만들어봤다.\nAOP에서는 <code class=\"language-text\">PointCut</code>의 범위를 <code class=\"language-text\">JwtAuthenticationFilter</code>까지 포함할 수 있도록 패키지내 모든 클래스에 진입할때 로그가 발생하도록 작성했다. (이유를 알고 봐도 크게 문제가 없어보인다.)</p>\n<h4 id=\"문제의-소스코드\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EC%9D%98-%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C\" aria-label=\"문제의 소스코드 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><strong><em>문제의 소스코드</em></strong></h4>\n<ol>\n<li>\n<p>Spring Security에서 JWT 토큰 인증을 위한 필터. <code class=\"language-text\">OncePerRequestFilter</code>를 상속</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtAuthenticationFilter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">OncePerRequestFilter</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">JwtUtil</span> jwtUtil<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">UserDetailsService</span> userDetailsService<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n<li>\n<p>패키지내 클래스에 진입할 때 로그를 찍는 AOP</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Pointcut</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"execution(* com.sample..*(..))\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">logPointcut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Before</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"logPointcut()\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doLog</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JoinPoint</span> joinPoint<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    log<span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[ENTER] \"</span> <span class=\"token operator\">+</span> joinPoint<span class=\"token punctuation\">.</span><span class=\"token function\">getSignature</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ol>\n<h4 id=\"에러-내용\" style=\"position:relative;\"><a href=\"#%EC%97%90%EB%9F%AC-%EB%82%B4%EC%9A%A9\" aria-label=\"에러 내용 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><strong><em>에러 내용</em></strong></h4>\n<ul>\n<li>\n<p>실행하면 내장 톰캣이 올라오지 않고 아래와 같은 에러가 발생한다. 다시 봐도 기분이 몹시 나쁘다. <code class=\"language-text\">\"this.logger\" is null</code>, <code class=\"language-text\">Unable to start embedded Tomcat</code></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Cannot</span> invoke <span class=\"token string\">\"org.apache.commons.logging.Log.isDebugEnabled()\"</span> because <span class=\"token string\">\"this.logger\"</span> is <span class=\"token keyword\">null</span>\n\n<span class=\"token class-name\">Caused</span> by<span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>NullPointerException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Cannot</span> invoke <span class=\"token string\">\"org.apache.commons.logging.Log.isDebugEnabled()\"</span> because <span class=\"token string\">\"this.logger\"</span> is <span class=\"token keyword\">null</span>\n    at <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span></span>OncePerRequestFilter</span><span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OncePerRequestFilter</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">109</span><span class=\"token punctuation\">)</span>\n    at <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>sample<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span></span>JwtAuthenticationFilter</span><span class=\"token punctuation\">.</span><span class=\"token function\">doFilterInternal</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JwtAuthenticationFilter</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span>\n    at <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span></span>FilterChainProxy</span><span class=\"token punctuation\">.</span><span class=\"token function\">doFilterInternal</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FilterChainProxy</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">209</span><span class=\"token punctuation\">)</span>\n    at <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span></span>FilterChainProxy</span><span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FilterChainProxy</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">178</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token class-name\">Caused</span> by<span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span>ApplicationContextException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Unable</span> <span class=\"token keyword\">to</span> <span class=\"token namespace\">start</span> web server\n    at <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span>ServletWebServerApplicationContext</span><span class=\"token punctuation\">.</span><span class=\"token function\">onRefresh</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServletWebServerApplicationContext</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">164</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token class-name\">Caused</span> by<span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span></span>WebServerException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Unable</span> <span class=\"token keyword\">to</span> <span class=\"token namespace\">start</span> embedded <span class=\"token class-name\">Tomcat</span>\n    at <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>embedded<span class=\"token punctuation\">.</span>tomcat<span class=\"token punctuation\">.</span></span>TomcatWebServer</span><span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TomcatWebServer</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">142</span><span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n</li>\n</ul>\n<h2 id=\"왓-더-Logger가-왜-Null인데\" style=\"position:relative;\"><a href=\"#%EC%99%93-%EB%8D%94-Logger%EA%B0%80-%EC%99%9C-Null%EC%9D%B8%EB%8D%B0\" aria-label=\"왓 더 Logger가 왜 Null인데 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>❓왓 더 Logger가 왜 Null인데</h2>\n<p>Spring Security + JWT + AOP 조합에서 <code class=\"language-text\">JwtAuthenticationFilter</code>가 AOP <code class=\"language-text\">PointCut</code>의 범위에 포함되는 순간 에러가 발생한다.</p>\n<ul>\n<li>Spring AOP는 메서드를 가로채기 위해 프록시 객체를 생성한다.</li>\n<li>AOP는 클래스의 메서드만 프록시로 감싸고, 필드는 복제하지 않는다.</li>\n<li><code class=\"language-text\">JwtAuthenticationFilter</code>에서 상속받고 있는 <code class=\"language-text\">OncePerRequestFilter</code> 클래스에는 <code class=\"language-text\">if (logger.isDebugEnabled()) {</code> 구문이 존재한다.</li>\n<li>필드는 복제되지 않기 때문에 <code class=\"language-text\">logger.isDebugEnabled()</code> 호출 시 <code class=\"language-text\">\"this.logger\" is null</code></li>\n<li>결국 내장 톰캣은 실행되지 못하고 <code class=\"language-text\">Unable to start embedded Tomcat</code>을 내뱉는다.</li>\n</ul>\n<hr>\n<h2 id=\"-해결-AOP-Pointcut에서-필터-제외시키기\" style=\"position:relative;\"><a href=\"#-%ED%95%B4%EA%B2%B0-AOP-Pointcut%EC%97%90%EC%84%9C-%ED%95%84%ED%84%B0-%EC%A0%9C%EC%99%B8%EC%8B%9C%ED%82%A4%EA%B8%B0\" aria-label=\" 해결 AOP Pointcut에서 필터 제외시키기 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>✅ 해결: AOP Pointcut에서 필터 제외시키기</h2>\n<p>AOP 대상에서 <code class=\"language-text\">JwtAuthenticationFilter</code>를 명시적으로 제외시켜주는걸로 톰캣이 다시 살아났다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Pointcut</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"(execution(* com.sample..*(..)))\"</span> \n        <span class=\"token operator\">+</span> <span class=\"token string\">\" &amp;&amp; !within(com.sample.security.filter.JwtAuthenticationFilter)\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">logPointcut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Before</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"logPointcut()\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doLog</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JoinPoint</span> joinPoint<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[ENTER] \"</span> <span class=\"token operator\">+</span> joinPoint<span class=\"token punctuation\">.</span><span class=\"token function\">getSignature</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<hr>\n<h2 id=\"-마치며\" style=\"position:relative;\"><a href=\"#-%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\" 마치며 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>👋 마치며</h2>\n<p>로컬 환경에서도 로그 레벨을 <code class=\"language-text\">error</code>로 해두고 개발을 하다가 콘솔에<br>\n<code class=\"language-text\">[Cannot invoke... is null]</code>이 찍히지 않아서 문제를 정확하게 파악하지 못하고 있었다.\n옆자리 은인에게 도움을 받아서 해결.. (결국 로그 레벨의 중요성을 이제야 깨달은 멍청한 나의 탓)</p>","frontmatter":{"title":"Spring AOP + JWT logger is null 수정","date":"April 06, 2025","update":"April 07, 2025","tags":["spring","springboot","aop","jwt","error"],"series":null,"emoji":"🧨"},"fields":{"slug":"/spring-jwt-aop-log-null-error/","readingTime":{"minutes":3.6}}},"seriesList":{"edges":[{"node":{"id":"f64e3748-a006-5dbe-a601-023187bb5f60","fields":{"slug":"/intellij-vo-mybatis-xml/"},"frontmatter":{"title":"VO 및 Mybatis XML 자동 생성하기 (with. IntelliJ)","emoji":"🚘"}}},{"node":{"id":"30ae48a8-6973-54a6-a8c6-c43df2ca6279","fields":{"slug":"/linux-swap-memory/"},"frontmatter":{"title":"리눅스 Swap memory 할당/해제","emoji":"💿"}}},{"node":{"id":"d1f0f9d6-5027-5e4b-b289-a929e205d20b","fields":{"slug":"/amazon-linux-nexus-install/"},"frontmatter":{"title":"Amazon Linux에 Nexus 설치하기","emoji":"🔗"}}},{"node":{"id":"c342f8aa-ebb9-5e04-9dd3-815970e4e7f9","fields":{"slug":"/nexus-connect-aws-s3/"},"frontmatter":{"title":"Nexus에 AWS S3 연결하기 (Blob Stores)","emoji":"🪣"}}},{"node":{"id":"8f9df21d-60be-5635-b3ce-2f1574b65dd1","fields":{"slug":"/amazon-linux-sonarqube-install/"},"frontmatter":{"title":"Amazon Linux SonarQube 설치","emoji":"🔎"}}},{"node":{"id":"732ce071-bdc0-5690-a597-a6437e028c1e","fields":{"slug":"/docker-root-directory-change/"},"frontmatter":{"title":"Docker Root Directory 변경","emoji":"🐳"}}},{"node":{"id":"fd5d1b4a-4a98-5719-8048-0b25722827f3","fields":{"slug":"/amazon-linux-jenkins-install/"},"frontmatter":{"title":"Amazon Linux에 Jenkins 설치하기","emoji":"🏗️"}}},{"node":{"id":"1f1f59cb-3de1-54a6-9de8-7637f5437028","fields":{"slug":"/jenkins-agent-node-ssh/"},"frontmatter":{"title":"Jenkins Agent Node 설정하기","emoji":"🤖"}}},{"node":{"id":"4e2279dc-9a69-5fbd-8a0a-d183e7b21c64","fields":{"slug":"/amazon-linux-postgresql-17-install/"},"frontmatter":{"title":"Amazon Linux에 PostgreSQL 수동 설치","emoji":"🗄️"}}},{"node":{"id":"c50ec455-5ac1-5434-925b-bb7085155bc3","fields":{"slug":"/postgresql-session-kill/"},"frontmatter":{"title":"PostgreSQL 세션 정보 확인 및 종료","emoji":"💣"}}},{"node":{"id":"ca4f63fe-80c4-5995-b1c8-bea3891cc725","fields":{"slug":"/react-error-slider-cannot-be-used-as-a-jsx-component/"},"frontmatter":{"title":"ERROR. 'Slider' cannot be used as a JSX component.","emoji":"️🌋"}}},{"node":{"id":"4c6337d3-927c-5ba5-a254-3aa7da1b7bf9","fields":{"slug":"/spring-custom-annotation/"},"frontmatter":{"title":"Spring Custom Annotation 만들기 (Feat. AOP)","emoji":"🌱"}}},{"node":{"id":"2acd1eee-b88c-5ee3-94f8-aec2c9e914b8","fields":{"slug":"/amazon-ec2-ebs-encrypt/"},"frontmatter":{"title":"사용중인 Amazon EBS 암호화하기 (EC2에 연결된 상태)","emoji":"🔒"}}},{"node":{"id":"19619cd0-333a-5ea1-957e-f477e4f94f7a","fields":{"slug":"/gitops-workflow/"},"frontmatter":{"title":"GitOps Workflow에 대한 나의 경험","emoji":"🏢"}}},{"node":{"id":"8e121ff5-42a8-5a9c-8f7e-91a549e81c6c","fields":{"slug":"/amazon-linux-rhel-ssh-port/"},"frontmatter":{"title":"리눅스 SSH 포트 변경 (Amazon Linux, RHEL)","emoji":"🔐"}}},{"node":{"id":"dc1095d2-4a18-5f2d-b7ad-4fd48c9a6010","fields":{"slug":"/postgresql-password-policy-credcheck/"},"frontmatter":{"title":"PostgreSQL 패스워드 정책 설정 (CredCheck)","emoji":"📃"}}},{"node":{"id":"119feed9-8e89-55c7-b69f-f22c11e95822","fields":{"slug":"/spring-get-api-list/"},"frontmatter":{"title":"Spring Annotation 값 읽기 (API 전체 목록 조회)","emoji":"📖"}}},{"node":{"id":"7ed8f468-bf31-51b9-a11d-6b290ecaa1ba","fields":{"slug":"/spring-jwt-aop-log-null-error/"},"frontmatter":{"title":"Spring AOP + JWT logger is null 수정","emoji":"🧨"}}}]},"previous":{"fields":{"slug":"/spring-get-api-list/"},"frontmatter":{"title":"Spring Annotation 값 읽기 (API 전체 목록 조회)"}},"next":null},"pageContext":{"id":"7ed8f468-bf31-51b9-a11d-6b290ecaa1ba","series":null,"previousPostId":"119feed9-8e89-55c7-b69f-f22c11e95822","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}